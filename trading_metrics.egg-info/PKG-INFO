Metadata-Version: 2.4
Name: trading-metrics
Version: 0.1.0
Summary: Shared performance metrics calculations for trading projects
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: pandas>=1.5.0
Requires-Dist: numpy>=1.21.0
Requires-Dist: quantstats>=0.0.62
Requires-Dist: sqlalchemy>=2.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"

# Trading Metrics

Shared performance metrics library for trading projects. Part of the [Trading Platform](../README.md).

## Installation

```bash
# From local path (development)
pip install -e /path/to/trading-metrics

# From GitHub
pip install git+https://github.com/YOUR_USERNAME/trading-metrics.git
```

## Quick Usage

```python
from trading_metrics import (
    run_backtest,
    generate_signals,
    InsufficientDataError,
    InvalidDataError,
)

# Generate signals
signals = generate_signals(
    model_type="stoploss",
    config={"buy_dip_threshold": 0.05, "sell_drawdown_threshold": 0.08},
    prices_df=prices,
    symbol="QQQ"
)

# Run backtest
result = run_backtest(signals, prices, 'date', 'close')
print(f"Return: {result.baseline.strategy_return:.2%}")
print(f"Sharpe: {result.metrics.sharpe_ratio:.2f}")
```

## Error Handling

**No silent failures.** Functions raise clear errors on invalid input:

```python
from trading_metrics import run_backtest, InsufficientDataError, InvalidDataError

try:
    result = run_backtest(signals, prices, 'date', 'close')
except InsufficientDataError as e:
    print(f"Not enough data: {e}")
    # e.g., "prices_df is empty - no price data provided"
except InvalidDataError as e:
    print(f"Bad data: {e}")
    # e.g., "prices_df contains 3 NaN price value(s)"
```

| Error | When Raised |
|-------|-------------|
| `InsufficientDataError` | Empty data, not enough rows, missing required data |
| `InvalidDataError` | NaN/Inf values, missing columns, negative prices |

## Trading Paradigm

All simulations follow **"Start Invested"**:

1. Start 100% invested (baseline = buy-and-hold)
2. Every trade cycle = SELL → BUY (exit, then re-enter)
3. If ends with SELL → implicit BUY at final price

## Available Functions

| Category | Functions |
|----------|-----------|
| **Errors** | `InsufficientDataError`, `InvalidDataError` |
| **Metrics** | `calculate_sharpe_ratio`, `calculate_sortino_ratio`, `calculate_max_drawdown`, `calculate_cagr`, `calculate_volatility` |
| **Backtest** | `run_backtest`, `simulate_strategy_from_invested` |
| **Signals** | `generate_signals`, `make_exit_condition`, `make_reentry_condition` |
| **Analysis** | `analyze_exit_reentry`, `calculate_buy_hold_return` |

## Documentation

| Doc | Description |
|-----|-------------|
| [ARCHITECTURE.md](../ARCHITECTURE.md) | How metrics fit in the system |
| [DEVELOPER.md](../DEVELOPER.md) | Integration examples |

## Dependencies

- pandas
- numpy
